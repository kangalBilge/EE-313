Version 4
SHEET 1 1480 1008
WIRE 320 16 288 16
WIRE 432 16 400 16
WIRE 352 128 352 112
WIRE 32 144 16 144
WIRE 176 144 112 144
WIRE 288 144 288 16
WIRE 288 144 256 144
WIRE 320 144 288 144
WIRE 1056 144 1056 128
WIRE 432 160 432 16
WIRE 432 160 384 160
WIRE 688 160 432 160
WIRE 912 160 896 160
WIRE 1024 160 992 160
WIRE 320 176 208 176
WIRE 1168 176 1088 176
WIRE 1232 176 1168 176
WIRE 1344 176 1312 176
WIRE 1008 192 992 192
WIRE 1024 192 1008 192
WIRE 688 208 688 160
WIRE 1408 224 1408 176
WIRE 912 240 896 240
WIRE 992 240 992 192
WIRE 368 256 288 256
WIRE 496 256 432 256
WIRE 1008 272 1008 192
WIRE 1024 272 1008 272
WIRE 1168 272 1168 176
WIRE 1168 272 1104 272
WIRE 640 288 640 272
WIRE 128 320 128 304
WIRE 400 368 400 352
WIRE 496 384 496 256
WIRE 496 384 432 384
WIRE 560 384 496 384
WIRE 688 384 688 288
WIRE 688 384 640 384
WIRE 208 400 208 176
WIRE 208 400 128 400
WIRE 288 400 288 256
WIRE 368 400 288 400
WIRE 1056 400 1056 384
WIRE 560 416 432 416
WIRE 912 416 896 416
WIRE 1024 416 992 416
WIRE 1168 432 1088 432
WIRE 1216 432 1168 432
WIRE 1344 432 1296 432
WIRE 1008 448 992 448
WIRE 1024 448 1008 448
WIRE 560 464 560 416
WIRE 688 464 640 464
WIRE 1408 480 1408 432
WIRE 128 496 128 480
WIRE 912 496 896 496
WIRE 992 496 992 448
WIRE 1008 528 1008 448
WIRE 1024 528 1008 528
WIRE 1168 528 1168 432
WIRE 1168 528 1104 528
WIRE 464 560 320 560
WIRE 608 560 464 560
WIRE 704 560 608 560
WIRE 464 576 464 560
WIRE 608 576 608 560
WIRE 704 576 704 560
WIRE 144 624 144 592
WIRE 320 624 320 560
WIRE 608 672 608 656
WIRE 704 672 704 656
WIRE 464 688 464 656
WIRE 608 688 608 672
WIRE 704 688 704 672
WIRE 464 704 464 688
WIRE 880 800 880 768
FLAG 352 112 Vcc
FLAG 352 192 0
FLAG 640 288 0
FLAG 640 224 Vsw
FLAG 400 432 0
FLAG 400 352 Vcc
FLAG 128 496 0
FLAG 688 464 Vref
FLAG 688 160 Vout
FLAG 16 144 0
FLAG 896 160 Vout
FLAG 896 240 Vsouth
FLAG 896 416 Vnorth
FLAG 896 496 Vout
FLAG 1056 384 Vcc
FLAG 1056 128 Vcc
FLAG 1056 208 0
FLAG 1056 464 0
FLAG 320 704 0
FLAG 464 784 0
FLAG 880 880 0
FLAG 880 768 Vsw
FLAG 464 688 Vref
FLAG 608 768 0
FLAG 704 768 0
FLAG 608 672 Vnorth
FLAG 704 672 Vsouth
FLAG 144 704 0
FLAG 144 592 Vcc
FLAG 128 224 0
FLAG 1408 480 0
FLAG 1408 224 0
SYMBOL voltage 128 144 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V1
SYMATTR Value SINE(3 0.6m 10 1)
SYMBOL res 272 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 12k
SYMBOL OpAmps/opamp2 352 96 R0
SYMATTR InstName U1
SYMATTR Value LM324
SYMBOL res 416 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 12Meg
SYMBOL sw 688 304 M180
SYMATTR InstName S1
SYMBOL res 656 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1Meg
SYMBOL OpAmps/opamp2 400 336 M0
SYMATTR InstName U2
SYMATTR Value TL084
SYMBOL cap 432 240 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 0.82µ
SYMBOL res 304 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL res 112 304 R0
SYMATTR InstName R5
SYMATTR Value 12k
SYMBOL res 112 384 R0
SYMATTR InstName R6
SYMATTR Value 12k
SYMBOL res 656 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL OpAmps/opamp2 1056 112 R0
SYMATTR InstName U3
SYMATTR Value LM324
SYMBOL OpAmps/opamp2 1056 368 R0
SYMATTR InstName U4
SYMATTR Value LM324
SYMBOL res 1008 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res 1008 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res 1008 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL res 1008 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 1120 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 120k
SYMBOL res 1120 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 120k
SYMBOL LED 1344 448 R270
WINDOW 0 72 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value LXK2-PW14
SYMBOL voltage 320 608 R0
SYMATTR InstName V2
SYMATTR Value 6
SYMBOL res 448 560 R0
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL res 448 688 R0
SYMATTR InstName R16
SYMATTR Value 5k
SYMBOL voltage 880 784 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 10 0.4 0 0 0.2 5 1)
SYMBOL res 592 560 R0
SYMATTR InstName R15
SYMATTR Value 120
SYMBOL res 688 560 R0
SYMATTR InstName R17
SYMATTR Value 1.8k
SYMBOL res 592 672 R0
SYMATTR InstName R18
SYMATTR Value 1.2k
SYMBOL res 688 672 R0
SYMATTR InstName R19
SYMATTR Value 5.6k
SYMBOL voltage 144 608 R0
SYMATTR InstName V3
SYMATTR Value 15
SYMBOL voltage 128 320 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName V4
SYMATTR Value 6
SYMBOL res 1312 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 3.3k
SYMBOL res 1328 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 3.3k
SYMBOL LED 1344 192 R270
WINDOW 0 72 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value LXK2-PW14
TEXT 880 600 Left 2 !.include TL084.txt
TEXT 880 632 Left 2 !.include LM324.txt
TEXT 880 664 Left 2 !.tran 0 190 0 0.01
TEXT 872 696 Left 2 !.model SW SW(Ron=0.1 Roff=1000Meg Vt=5 Vh=0)
TEXT 1128 576 Left 2 !.options gmin=1e-10
TEXT 1128 648 Left 2 !.options abstol=1e-10
TEXT 1128 624 Left 2 !.options reltol=0.003
TEXT 1128 600 Left 2 !.options cshunt=1e-15
